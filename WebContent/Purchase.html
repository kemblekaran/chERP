<html>

<head>
<title>Purchase</title>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
	integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
	crossorigin="anonymous">
<link rel="stylesheet"
	href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="css/index.css">
<link rel="stylesheet" href="validate.css">
<script src="https://www.w3schools.com/lib/w3.js"></script>

<!-- scripts for view table screen -->
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.js"></script>
<script>
	//set current date to purchase using datepicker
	$(function() {
		$("#date").datepicker({
			// 			dateFormat : 'dd/mm/yy',
			showAnim : 'drop',
			showButtonPanel : true,
		}).datepicker('setDate', 'today');
	});
</script>
<!-- datepicker scripts -->
<link rel="stylesheet"
	href="http://code.jquery.com/ui/1.9.1/themes/blitzer/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

</head>


<body>
	<div w3-include-html="main.html"></div>
	<div class="container-fluid ">
		<form id="PurchaseForm">
			<input type="hidden" id="actionURL" value="PurchaseServlet">
			<div class="row well">

				<div class="col-md-2 col-width ">
					<label>Purchase Id</label> <input type="text" class="form-control"
						name="purchaseId" id="purchaseid" readonly="readonly" value="">
				</div>

				<div class="col-md-2 col-width ">
					<label>Date</label> <input type="text" name="date"
						class="form-control" id="date">
				</div>

				<div class="col-md-2 col-width ">
					<label>Van</label> <select id="vanList" class="form-control"
						name="vanName">
						<option selected="true" disabled="disabled">Select Van</option>
					</select>
				</div>

				<div class="col-md-2 col-width ">
					<label>Driver 1</label> <select id="driverList1"
						class="form-control" name="driver1">
						<option selected="true" disabled="disabled">Select Driver</option>
					</select>
				</div>

				<div class="col-md-2 col-width ">
					<label>Driver 2</label> <select id="driverList2"
						class="form-control" name="driver2">
						<option selected="true" disabled="disabled">Select Driver</option>
					</select>
				</div>

				<div class="col-md-2 col-width ">
					<label>Cleaner 1</label> <select id="cleanerList1"
						class="form-control" name="cleaner1">
						<option selected="true" disabled="disabled">Select Cleaner</option>
					</select>
				</div>




			</div>
			<div class="row well">
				<div class="col-md-2 col-width ">
					<label>Cleaner 2</label> <select id="cleanerList2"
						class="form-control" name="cleaner2">
						<option selected="true" disabled="disabled">Select Cleaner</option>
					</select>
				</div>

				<div class="col-md-2 col-width ">
					<label>Company</label> <select id="companyList"
						class="form-control" name="company">
						<option selected="true" disabled="disabled"> Select Company</option>
					</select>
				</div>

				<div class="col-md-2 col-width ">
					<label>Location</label> <select id="locationList"
						class="form-control" name="location">
						<option selected="true" disabled="disabled">Select Location</option>
					</select>
				</div>

				<div class="col-md-2 col-width ">
					<label>Outstanding</label> <input type="text" class="form-control"
						id="outstanding" placeholder="OutStanding" 
						name="outstanding">
				</div>

				<div class="col-md-2 col-width ">
					<label>Challan No</label> <input type="text" class="form-control"
						id="challanNo" placeholder="Challan No." name="challanNo"
						value="0">
				</div>



				<div class="col-md-2 col-width ">
					<label>Rent</label> <input type="text" class="form-control"
						id="rent" placeholder="Rent" name="rent" value="0">
				</div>


			</div>

			<div class="jumbotron">
				<!-- Table for Product  -->
				<table id="productTable" class="table-bordered responsive">
					<thead style="background-color: #4a4b4c; color: #fff">
						<tr>
							<td>Product</td>
							<td>Pieces</td>
							<td>KG</td>
							<td>Rate</td>
							<td>Amount</td>
							<td>Average Weight</td>
						</tr>
					</thead>
					<thead>

						<tr>
							<th><select id="productSelect" name="product"
								class="form-control">
									<option selected="true" disabled="disabled">Select Product</option>
							</select></th>
							<th><input type="text" name="pieces" id="pieces"
								class="form-control"></th>
							<th><input type="text" name="kg" id="kg"
								class="form-control"></th>
							<th><input type="text" name="rate" id="rate"
								class="form-control"></th>
							<th><input type="text" name="amount" id="amount"
								readonly="readonly" class="form-control"></th>
							<th><input type="text" name="avgWeight" id="avgWeight"
								readonly="readonly" class="form-control"></th>
						</tr>

					</thead>

				</table>

			</div>
			
				<div class="well col-md-2">
					<label for="finalAmount">Final Amount</label> <input type="text"
						name="finalAmount" id="finalAmount" class="form-control">
				</div>
			
			<input type="hidden" name="operation" value="insert">


			<!-- input type for sending product json as form value -->
			<input type="hidden" name="productJson" id="productJson">

			<!-- input type for sending payload json as form value -->
			<input type="hidden" name="payloadJson" id="payloadJson">
			<div class="col-md-1 col-md-offset-1"><br>
				<button id="insertBtn" class="btn btn-success">save</button>
			</div>
		</form>
		<div class="col-md-1 "><br>
			<button id="viewBtn" class="btn btn-primary" data-toggle="modal"
				data-target="#viewModal">view</button>
		</div>
		<div class="col-md-1 "><br>
		<INPUT TYPE="button" onClick="history.go(0)" VALUE="Refresh" class="btn btn-info">
		</div>
		<!-- Add Button Modal-->
		<div id="viewModal" class="modal fade " role="dialog">
			<div class="modal-size">

				<!-- Modal content-->
				<div class="modal-content">
					<!--Modal header-->
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Purchase</h4>
					</div>

					<!--Modal body-->
					<div class="modal-body">
						<!--Table Row-->
						<div class="" id="tableRow">
							<table id="purchaseViewTable"
								class="table-bordered responsive stripe hover ">
								<thead style="background-color: #4a4b4c; color: #fff">
									<tr>
										<th>Purchase Id</th>
										<th>Purchase Date</th>
										<th>Van Name</th>
										<th>Company</th>
										<th>Location</th>
										<th>Product</th>
										<th>Pieces</th>
										<th>KG</th>
										<th>Rate</th>
										<th>Amount</th>
										<th>Average Weight</th>
										<th>FinalAmount</th>
									</tr>
								</thead>
							</table>

						</div>
					</div>

				</div>

			</div>
		</div>


	</div>


	<!--JS source files-->
	<script>
		w3.includeHTML();
	</script>
	<!-- 	<script src="http://code.jquery.com/jquery-3.2.1.min.js" -->
	<!-- 		integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" -->
	<!-- 		crossorigin="anonymous"></script> -->
	<script
		src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
	<!-- 	<script -->
	<!-- 		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" -->
	<!-- 		integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" -->
	<!-- 		crossorigin="anonymous"></script> -->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js"></script>
	<script src="validation/validatePurchase.js"></script>
	<script src="js/dataTables.cellEdit.js"></script>
	<script
		src="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css"></script>
	<!--<script src="js/dataTable.js" type="text/javascript"></script> -->
	<script src="js/purchaseDataLoader.js" type="text/javascript"></script>
	<script type="text/javascript" src="js/dataentry/purchase.js"></script>
	<script type="text/javascript">
		//datatable for product
		var productTable = $('#productTable').DataTable();

		//variable for number of columns in table
		var noOfCols = $("#dataTable tr:visible th").length;
		var editableCols = new Array();

		//creates array for editable columns parameter
		for (var i = 1; i < noOfCols; i++) {
			editableCols.push(i);

		}

		//add data to datatable(very important)
		var dataTable = $('#purchaseViewTable').DataTable({
			"ajax" : "/server/jsonfiles/purchaseView.json",
			"pageLength" : 15,
			"columnDefs" : [ {
				"className" : "dt-center",
				"targets" : "_all"
			} ],
			"order" : [ [ 0, "desc" ] ],
			"columns" : [ {
				"data" : "purchaseId"
			}, {
				"data" : "date"
			}, {
				"data" : "vanName"
			}, {
				"data" : "company"
			}, {
				"data" : "location"
			}, {
				"data" : "product"
			}, {
				"data" : "pieces"
			}, {
				"data" : "kg"
			}, {
				"data" : "rate"
			}, {
				"data" : "amount"
			}, {
				"data" : "avgWeight"
			}, {
				"data" : "finalAmount"
			} ]
		});
	</script>

</body>

</html>
